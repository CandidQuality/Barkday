<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Barkday™ • Dog → Human Years</title>

  <!-- Share / SEO metadata -->
  <meta name="description" content="Dog-year birthdays: calculate the next one and get a plan for better care." />
  <meta property="og:title" content="Barkday™ — Dog-Year Birthdays" />
  <meta property="og:description" content="Dog-year birthdays: calculate the next one and get a plan for better care." />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Barkday™ — Dog-Year Birthdays" />
  <meta name="twitter:description" content="Dog-year birthdays: calculate the next one and get a plan for better care." />

  <style>
    :root{ --bg:#0b0c10; --card:#13151a; --text:#e8ecf1; --muted:#9aa4af; --brand:#4aa3ff; --accent:#6ae3b2; --danger:#ff6b6b; --border:#232734; --shadow:0 6px 24px rgba(0,0,0,.35); }
    :root[data-theme="light"]{ --bg:#f7f8fa; --card:#ffffff; --text:#0f172a; --muted:#475569; --brand:#2563eb; --accent:#059669; --danger:#b91c1c; --border:#e2e8f0; --shadow:0 6px 24px rgba(2,6,23,.08); }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,"Helvetica Neue",Arial}
    .wrap{max-width:1100px;margin:0 auto;padding:24px}

    header{display:flex;gap:16px;align-items:flex-start;justify-content:space-between;margin-bottom:8px}
    .title{display:flex;gap:12px;align-items:center}
    .logo{width:40px;height:40px;border-radius:10px;display:grid;place-items:center;overflow:hidden;background:transparent}
    .logoImg{width:100%;height:100%;object-fit:contain;filter:drop-shadow(0 2px 4px rgba(0,0,0,.25))}
    .logoFallback{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--brand),var(--accent));display:grid;place-items:center;color:#0b0c10}
    .toggle{appearance:none;border:1px solid var(--border);background:var(--card);color:var(--text);padding:8px 12px;border-radius:12px;cursor:pointer;box-shadow:var(--shadow)}

    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:var(--shadow)}
    h1{font-size:22px;margin:0}
    h2{font-size:18px;margin:0 0 8px}
    label{font-weight:600;display:block;margin:14px 0 6px}
    input[type="number"], select, input[type="date"], input[type="text"]{width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:var(--bg);color:var(--text)}
    input[type="range"]{width:100%}
    .row{display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap}
    .row > div{flex:1 1 240px;min-width:220px}
    .muted{color:var(--muted);font-size:14px}
    .divider{height:1px;background:var(--border);margin:12px -16px}

    .kpi{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;margin-top:12px}
    .pill{border:1px solid var(--border);background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(0,0,0,.05));border-radius:14px;padding:10px 12px}
    .pill h3{margin:0 0 6px;font-size:15px;color:var(--muted);font-weight:600}
    .big{font-size:24px;font-weight:800}
    .pill.primary .big{font-size:26px}
    .headline{font-size:28px;font-weight:900;line-height:1.15;margin:0 0 4px}
    .primary{outline:2px solid var(--brand);}

    .btn{appearance:none;border:1px solid var(--border);background:var(--brand);color:white;padding:10px 14px;border-radius:12px;cursor:pointer}
    .btn.secondary{background:transparent;color:var(--text)}

    .cardlist{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
    .gift{border:1px solid var(--border);border-radius:12px;padding:12px}
    .gift h4{margin:0 0 6px}
    .link{background:none;border:0;color:var(--brand);cursor:pointer;text-decoration:underline;padding:0}
    .hero{margin:4px 0 0 44px}
    .warn{background:rgba(255,107,107,.1);border:1px solid var(--danger);color:var(--danger);padding:8px 10px;border-radius:10px;margin:8px 0}

    /* Plan lanes */
    .plan{margin-top:12px}
    .lane{border:1px solid var(--border);border-radius:12px;padding:12px;margin:8px 0;background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(0,0,0,.04))}
    .lane h4{margin:0 0 6px;font-size:15px;color:var(--muted)}
    .lane ul{margin:0;padding-left:18px}
    .lane li{margin:4px 0}

    /* Splash screen */
    .splash{
      position:fixed; inset:0; display:grid; place-items:center;
      background:radial-gradient(1000px 500px at 20% 10%, rgba(255,255,255,.06), transparent),
                 radial-gradient(1000px 500px at 80% 90%, rgba(255,255,255,.05), transparent),
                 var(--bg);
      z-index:9999; transition:opacity .5s ease; opacity:1;
    }
    .splash.hide{ opacity:0; pointer-events:none }
    .splash .logoWrap{width:160px;height:160px;border-radius:20px;display:grid;place-items:center}
    .splash .logoWrap img{width:100%;height:100%;object-fit:contain;filter:drop-shadow(0 6px 16px rgba(0,0,0,.45))}
  </style>
</head>
<body>
  <!-- SPLASH -->
  <div id="splash" class="splash" aria-hidden="true">
    <div class="logoWrap">
      <img alt="Barkday logo" src="data:image/png;base64,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PuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf" />
 />
    </div>
  </div>

  <div class="wrap">
    <header>
      <div class="title">
        <div class="logo" aria-hidden="true">
          <img class="logoImg" alt="Barkday logo" src="data:image/png;base64,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PuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf6QQAAAAAAID9TDMADAAAAAAAAPuZZgAAAAAAALCf" />

               onerror="this.style.display='none'; this.nextElementSibling.style.display='grid';" />
          <div class="logoFallback" style="display:none">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 7c0-1.38 1.12-2.5 2.5-2.5S12.5 5.62 12.5 7 11.38 9.5 10 9.5 7.5 8.38 7.5 7Zm6-1c0-1.38 1.12-2.5 2.5-2.5S18.5 4.62 18.5 6 17.38 8.5 16 8.5 13.5 7.38 13.5 6Zm-9 6c0-1.38 1.12-2.5 2.5-2.5S9.5 10.62 9.5 12s-1.12 2.5-2.5 2.5S4.5 13.38 4.5 12Zm14 0c0-1.38 1.12-2.5 2.5-2.5S23.5 10.62 23.5 12s-1.12 2.5-2.5 2.5S18.5 13.38 18.5 12Zm-6.5 4c-2.21 0-4 1.79-4 4h8c0-2.21-1.79-4-4-4Z"/></svg>
          </div>
        </div>
        <h1>Barkday™</h1>
      </div>
      <button id="themeToggle" class="toggle" type="button" aria-label="Toggle theme">🌙 Dark</button>
    </header>

    <p id="heroLine" class="muted hero">Let’s find out together what your precious friend’s birthdays are, so we can celebrate every single one.</p>

    <section class="card">
      <h2>Dog → Human Years</h2>
      <p class="muted">Evidence-based calculator using AVMA/AKC milestones (15/9 rule) with a <strong>weight-continuous slope</strong> after year 2. Optional UCSD DNA-methylation curve (≥ 1 yr). <em>Calculate/Reset only — no auto-recalc.</em></p>
      <div class="divider"></div>

      <div class="row">
        <div>
          <label for="dogName">Dog name</label>
          <input id="dogName" type="text" placeholder="e.g., Flip" />
        </div>
        <div>
          <label for="dob">Birthdate</label>
          <input id="dob" type="date" />
          <div class="muted">Dog age shown under Results.</div>
        </div>
        <div>
          <label for="adultWeight">Expected adult weight (lb)</label>
          <input id="adultWeight" type="range" min="5" max="200" step="5" value="55" />
          <div class="muted">Aging rate uses <em>5-lb steps</em>. <span id="adultWeightVal">55</span> lb</div>
        </div>
        <div>
          <label for="chewer">Chewer level</label>
          <select id="chewer">
            <option>Gentle</option>
            <option selected>Normal</option>
            <option>Power</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div>
          <label>Advanced</label>
          <label class="muted"><input id="showEpigenetic" type="checkbox"/> Show science curve (?) (UCSD DNA-methylation, ≥1 yr)</label>
          <label class="muted"><input id="smoothMilestones" type="checkbox" checked/> Use smooth milestones (blend around 12 & 24 months)</label>
        </div>
        <div>
          <label for="breed">Breed (optional)</label>
          <input id="breed" type="text" placeholder="e.g., Australian Shepherd" />
          <div class="muted">Notes only — math stays weight-based.</div>
        </div>
        <div>
          <label for="breedGroup">Breed group</label>
          <select id="breedGroup">
            <option>Working / Herding</option>
            <option>Sporting</option>
            <option>Hound</option>
            <option>Terrier</option>
            <option>Toy</option>
            <option>Non-Sporting</option>
            <option>Guardian</option>
            <option>Companion</option>
            <option>Mixed / Other</option>
          </select>
          <div id="breedExamples" class="muted" style="margin-top:6px"></div>
        </div>
      </div>

      <div class="row" style="margin-top:8px">
        <label class="muted"><input id="ignoreAge" type="checkbox"/> Ignore age filter</label>
        <label class="muted"><input id="ignoreSize" type="checkbox"/> Ignore size filter</label>
        <label class="muted"><input id="ignoreChewer" type="checkbox"/> Ignore chewer filter</label>
      </div>

      <div class="row" style="margin-top:12px">
        <button id="calcBtn" class="btn" type="button">Calculate</button>
        <button id="resetBtn" class="btn secondary" type="button">Reset</button>
        <button id="shareBtn" class="btn secondary" type="button">Share link</button>
      </div>

      <div id="sizeWarn" class="warn" style="display:none"></div>

      <div class="divider"></div>

      <h2>Results</h2>
      <div class="kpi">
        <div class="pill primary"><div class="headline" id="nextHeadline">—</div><div class="big" id="nextBday">—</div><div class="muted" id="nextBdayDelta"></div></div>
        <div class="pill"><h3>Dog age today</h3><div class="big" id="dogAge">—</div></div>
        <div class="pill"><h3>Human-years estimate</h3><div class="big" id="humanYears">—</div><div class="muted" id="slopeNote"></div></div>
      </div>
      <p id="profileLine" class="muted" style="margin:8px 0 0">—</p>
      <div id="breedNotes" class="muted" style="margin:6px 0 0"></div>

      <div class="row" style="margin-top:10px">
        <button id="addCalBtn" class="btn" type="button">Add to calendar (birthday)</button>
        <button id="remindBtn" class="btn secondary" type="button">Add 1-week reminder</button>
        <button id="addYearSeries" class="btn secondary" type="button">Add next 3 dog-year birthdays</button>
      </div>

      <div id="epi" class="muted" style="margin-top:10px"></div>

      <div class="divider"></div>

      <h2 id="nextPlanHeading">Next Birthday Plan</h2>
      <div id="nextPlan" class="plan"></div>

      <div class="divider"></div>

      <h2>Gift ideas</h2>
      <button id="loadGifts" class="btn secondary" type="button">Load gift ideas</button>
      <div id="giftMeta" class="muted" style="margin:8px 0"></div>
      <div id="gifts" class="cardlist"></div>
    </section>
  </div>

  <script>
    // THEME
    const root = document.documentElement; const toggleBtn = document.getElementById('themeToggle');
    const savedTheme = localStorage.getItem('barkday-theme') || 'dark';
    root.setAttribute('data-theme', savedTheme === 'light' ? 'light' : 'dark');
    toggleBtn.textContent = savedTheme === 'light' ? '🌙 Dark' : '☀️ Light';
    toggleBtn.addEventListener('click', () => {
      const now = root.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      root.setAttribute('data-theme', now); localStorage.setItem('barkday-theme', now);
      toggleBtn.textContent = now === 'light' ? '🌙 Dark' : '☀️ Light';
    });

    // Splash: fade out after load
    window.addEventListener('load', () => {
      setTimeout(() => document.getElementById('splash')?.classList.add('hide'), 900);
    });

    // Hidden constants
    const GIFT_FEED_URL = 'https://raw.githubusercontent.com/CandidQuality/dog-birthday-feed/main/dog-gifts.json';

    // Breed meta (examples under selector)
    const GROUP_META = {
      'Working / Herding': { desc:'High-drive problem solvers; thrive on jobs.', examples:['Border Collie','Australian Shepherd','German Shepherd','Belgian Malinois','Corgi'] },
      'Sporting': { desc:'Endurance + retrieving backgrounds; water-confident.', examples:['Labrador','Golden Retriever','Vizsla','GSP','Setter'] },
      'Hound': { desc:'Scent/sight specialists; independent.', examples:['Beagle','Dachshund','Greyhound','Foxhound','Basset'] },
      'Terrier': { desc:'Tenacious hunters; love dig/chase games.', examples:['JRT','Westie','Airedale','Border Terrier'] },
      'Toy': { desc:'Small frames; fragile joints; big personalities.', examples:['Chihuahua','Pomeranian','Yorkie','Maltese','Papillon'] },
      'Non-Sporting': { desc:'Mixed roles; needs vary widely.', examples:['Bulldog','Dalmatian','Poodle (Std)','Boston Terrier'] },
      'Guardian': { desc:'Large/giant protectors; joint management matters.', examples:['Rottweiler','Mastiff','Great Dane','Anatolian','Kuvasz'] },
      'Companion': { desc:'Human-bonded; thrive on routines.', examples:['Cavapoo','Cockapoo','Shih Tzu','Havanese'] },
      'Mixed / Other': { desc:'Profile by observed drive & size.', examples:['Mixed-breed','Rescue','Unknown lineage'] }
    };

    // Short guidance lines
    const GROUPS = {
      'Working / Herding':['High drive: daily jobs/puzzles (herding games, scentwork, obedience chains).','Mental fatigue matters as much as physical; enrichment like snuffle mats and hide-and-seek.','Prevent under-stimulation → boredom behaviors.'],
      'Sporting':['Endurance + retrieve instincts: structured fetch, dock diving, field games.','Watch weight gain; meal-prep measured portions.'],
      'Hound':['Scent/sight tracking: long-line scent walks, lure coursing where safe.','Strong recall training with high-value rewards.'],
      'Terrier':['Channel hunt drive: dig boxes, flirt poles, controlled tug.'],
      'Toy':['Fragility: low-impact play; dental care is critical.','Mind thermoregulation (cold/heat).'],
      'Non-Sporting':['Varied needs; tailor enrichment to individual energy and health.'],
      'Guardian':['Impulse control & neutrality training.','Joint support and moderated growth for large/giant frames.'],
      'Companion':['Human-bonded: reinforce calm independence to reduce separation stress.'],
      'Mixed / Other':['Profile by observed drive (retrieve, scent, herd) rather than labels.']
    };

    // Elements
    const el = id => document.getElementById(id);
    const els = {
      dogName: el('dogName'), dob: el('dob'), adultWeight: el('adultWeight'), adultWeightVal: el('adultWeightVal'),
      chewer: el('chewer'), showEpi: el('showEpigenetic'), smooth: el('smoothMilestones'), breed: el('breed'), breedGroup: el('breedGroup'),
      ignoreAge: el('ignoreAge'), ignoreSize: el('ignoreSize'), ignoreChewer: el('ignoreChewer'),
      calcBtn: el('calcBtn'), resetBtn: el('resetBtn'), shareBtn: el('shareBtn'), sizeWarn: el('sizeWarn'),
      nextHeadline: el('nextHeadline'), nextBday: el('nextBday'), nextBdayDelta: el('nextBdayDelta'),
      dogAge: el('dogAge'), humanYears: el('humanYears'), slopeNote: el('slopeNote'),
      addCal: el('addCalBtn'), remind: el('remindBtn'), addYearSeries: el('addYearSeries'),
      loadGifts: el('loadGifts'), giftMeta: el('giftMeta'), gifts: el('gifts'), heroLine: el('heroLine'), profileLine: el('profileLine'), breedNotes: el('breedNotes'), epi: el('epi')
    };

    // Personalized header line
    function possessive(n){ if(!n) return "your precious friend's"; const t=n.trim(); if(!t) return "your precious friend's"; return /s$/i.test(t)? `${t}’` : `${t}’s`; }
    function renderHero(){ els.heroLine.textContent = `Let’s find out together what ${possessive(els.dogName.value)} birthdays are, so we can celebrate every single one.`; }
    els.dogName.addEventListener('input', renderHero); renderHero();

    // Breed notes + examples
    function updateBreedNotes(){
      const name = els.dogName.value || 'your dog';
      const breedTxt = (els.breed.value||'').trim();
      const group = els.breedGroup.value;
      const lb = parseInt(els.adultWeight.value,10) || 55;
      els.profileLine.textContent = `Profile: ${name}${breedTxt ? ' — ' + breedTxt : ''} • Group: ${group} • Weight: ${lb} lb`;
      const notes = GROUPS[group]||[]; els.breedNotes.innerHTML = notes.map(n=>`• ${n}`).join(' ');
      const meta = GROUP_META[group];
      const bx = document.getElementById('breedExamples');
      if(bx){ bx.textContent = meta ? `${meta.desc} Examples: ${meta.examples.join(', ')}` : ''; }
    }
    ['input','change'].forEach(ev=>{
      els.breed.addEventListener(ev, updateBreedNotes);
      els.breedGroup.addEventListener(ev, updateBreedNotes);
      els.dogName.addEventListener(ev, updateBreedNotes);
      els.adultWeight.addEventListener(ev, updateBreedNotes);
    });
    updateBreedNotes();

    // Slider label (5-lb steps)
    els.adultWeight.addEventListener('input', ()=> {
      const v = Math.round(parseInt(els.adultWeight.value,10)/5)*5;
      els.adultWeight.value = v; els.adultWeightVal.textContent = v;
    });

    // If gifts are showing, re-filter when relevant controls change
    function reloadGiftsIfShown(){ if(els.gifts && els.gifts.children && els.gifts.children.length>0){ loadGifts(); } }
    ['change'].forEach(ev=>{
      els.adultWeight.addEventListener(ev, reloadGiftsIfShown);
      els.chewer.addEventListener(ev, reloadGiftsIfShown);
      els.ignoreAge.addEventListener(ev, reloadGiftsIfShown);
      els.ignoreSize.addEventListener(ev, reloadGiftsIfShown);
      els.ignoreChewer.addEventListener(ev, reloadGiftsIfShown);
    });

    // Helpers
    function daysBetween(a,b){ return Math.floor((b - a) / (24*60*60*1000)); }
    function clamp(n,min,max){ return Math.min(Math.max(n,min),max); }

    // Weight-continuous slope 5→7 (soft 7.2 at 200 lb)
    function slopeFromWeight(lb){ const w = clamp(lb, 5, 200); if(w <= 20) return 5; if(w <= 50) return 5 + (w-20)*(1/30); if(w <= 90) return 6 + (w-50)*(1/40); return 7 + (w-90)*(0.2/110); }
    function smoothBlend(x, center, width){ const t = clamp((x - (center - width/2)) / width, 0, 1); return t*t*(3 - 2*t); }
    function humanEqYears(tYears, lb, useSmooth){
      const R = slopeFromWeight(lb);
      if(!useSmooth){
        if(tYears <= 1) return 15*tYears;
        if(tYears <= 2) return 15 + 9*(tYears-1);
        return 24 + R*(tYears-2);
      }
      const f1 = smoothBlend(tYears, 1, 0.25); const slope12 = 15 + f1*(9-15);
      if(tYears <= 2){
        const part0 = Math.min(tYears,1)*15;
        const part1 = tYears>1 ? (tYears-1)*slope12 : 0;
        return part0 + part1;
      }
      const f2 = smoothBlend(tYears, 2, 0.5); const slopePost = 9 + f2*(R-9);
      const upTo2 = humanEqYears(2, lb, true);
      return upTo2 + (tYears-2)*slopePost;
    }
    function nextDogYearDate(dob, currentHumanEq, lb, useSmooth){ // next integer of DOG-YEARS
      const target = Math.floor(currentHumanEq) + 1;
      const now = new Date();
      const yearsNow = daysBetween(dob, now) / 365.2425;
      let lo = yearsNow, hi = yearsNow + 5;
      for(let i=0;i<40;i++){
        const mid=(lo+hi)/2; const h=humanEqYears(mid, lb, useSmooth);
        if(h>=target) hi=mid; else lo=mid;
      }
      const t=(lo+hi)/2;
      return new Date(dob.getTime() + t*365.2425*24*60*60*1000);
    }

    // Confetti (multi-color)
    function confetti(durationMs=1700){
      const canvas = document.createElement('canvas'); canvas.style.position='fixed'; canvas.style.inset='0'; canvas.style.pointerEvents='none';
      canvas.width=innerWidth; canvas.height=innerHeight; document.body.appendChild(canvas);
      const ctx = canvas.getContext('2d');
      const colors=['#4aa3ff','#6ae3b2','#ffd166','#ff6b6b','#a78bfa']; const N=160;
      const parts = Array.from({length:N},()=>({x:Math.random()*canvas.width,y:-20-Math.random()*40,vx:(Math.random()-.5)*4,vy:2+Math.random()*3,g:0.05+Math.random()*0.05,s:4+Math.random()*4,c:colors[Math.floor(Math.random()*colors.length)],r:Math.random()*Math.PI}));
      let start=null; function tick(ts){ if(!start) start=ts; const t=ts-start; ctx.clearRect(0,0,canvas.width,canvas.height);
        for(const p of parts){ p.x+=p.vx; p.y+=p.vy; p.vy+=p.g; p.r+=0.05; ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.r); ctx.fillStyle=p.c; ctx.fillRect(-p.s/2,-p.s/2,p.s,p.s); ctx.restore(); }
        if(t<durationMs) requestAnimationFrame(tick); else canvas.remove();
      } requestAnimationFrame(tick);
    }

    // ---------- Banded puppy/age plan ----------
    const AGE_BANDS = [
      { key: 'puppy_1_6',   min: 1,  max: 6,  label: 'Puppy I (1–6 dog-years)'   },
      { key: 'puppy_7_10',  min: 7,  max: 10, label: 'Puppy II (7–10 dog-years)' },
      { key: 'puppy_11_15', min: 11, max: 15, label: 'Puppy III (11–15 dog-years)'},
      { key: 'young_16_24', min: 16, max: 24, label: 'Young (16–24 dog-years)' },
      { key: 'adult_25_60', min: 25, max: 60, label: 'Adult (25–60 dog-years)' },
      { key: 'senior_61p',  min: 61, max: 999, label: 'Senior (61+ dog-years)' }
    ];
    function bandForDogYears(dy){ return AGE_BANDS.find(b=>dy>=b.min && dy<=b.max) || AGE_BANDS[AGE_BANDS.length-1]; }

    const RECO_BANDED = {
      "Working / Herding": {
        puppy_1_6: { lanes: {
          training:["Name response & marker word (1–3 min, 3–5×/day)","Gentle handling desensitization (paws, ears, mouth)","Start crate = calm naps; short positive entries only","Potty schedule: outside after sleep/eat/play"],
          health:["Puppy vaccine series on schedule; deworm as directed","Parasite prevention plan; safe chew supervision","Set up safe confinement area (x-pen or puppy-proofed room)"],
          nutrition:["Puppy-appropriate diet; 3–4 small meals/day","Weigh weekly; track body condition (avoid over/under-feeding)"],
          exercise:["Free play on soft surfaces; no forced runs or stairs","Very short leash introductions (1–3 min) — sniff & explore","No jumping off furniture; carry on stairs when possible"],
          bonding:["Socialization: novel sounds, surfaces, friendly people/dogs (controlled)","Calm grooming/brush sessions with treats (30–60 sec)"],
          gear:["Flat collar or Y-front harness (lightweight)","Soft snuffle mat, frozen lick mat, puppy-safe teether"]
        }},
        puppy_7_10: { lanes: {
          training:["Recall foundations on 15–30 ft line (indoors/yard)","Settle on mat (1–3 min → 5–7 min)","Introduce ‘leave it’ and polite greetings"],
          health:["Continue vaccine series; discuss spay/neuter timing with vet","Teeth coming in: supervised chew time"],
          nutrition:["Maintain puppy diet; adjust meal size with growth curve"],
          exercise:["2–3 short, varied sniff-walks/day (5–15 min)","No repetitive fetch or high-impact jumps"],
          bonding:["Low-arousal puzzle feeders 3–4×/week","Very easy nosework games (3–5 hides)"],
          gear:["Biothane long line; treat pouch","Level-1/2 puzzle feeder; soft tug (controlled rules)"]
        }},
        puppy_11_15: { lanes: {
          training:["Loose-leash with distractions (2–3 min reps)","Impulse control: door/food releases, stationing","Begin short duration stays (5–10 sec → 30–60 sec)"],
          health:["Finish series; baseline vet exam & dental hygiene plan"],
          nutrition:["Transition to adult formula when plates close (vet-guided)","Measure meals; keep BCS in 4–5/9"],
          exercise:["Structured play with decompression; avoid repetitive high throws","Short swim introductions (if comfy), warm up/cool down"],
          bonding:["Easy trick chain (hand target → spin → mat)"],
          gear:["Puzzle feeder (level 2)","High-visibility collar for open fields"]
        }},
        young_16_24: { lanes: { training:["Generalization of cues in new places"] } },
        adult_25_60: { lanes: { training:["Maintain recall; enrichment 15–20 min/day"] } },
        senior_61p:  { lanes: { health:["Senior labs baseline; joint care plan"] } }
      }
    };

    // (Optional) legacy RECO—only used if band not defined for group
    const RECO = {};

    function planFor(group, dogYears){
      const band = bandForDogYears(Math.round(dogYears));
      const plan = (RECO_BANDED[group]||{})[band.key];
      if (plan) return { plan, band };
      const g = (RECO[group] || RECO['Mixed / Other'] || {});
      const keys = Object.keys(g).map(k=>parseInt(k,10)).sort((a,b)=>a-b);
      if (!keys.length) return { plan: null, band };
      let lower=null, upper=null;
      for (const k of keys){ if(k <= dogYears) lower=k; if(k >= dogYears && upper===null) upper=k; }
      const chosen = (lower!==null)? lower : upper;
      return { plan: g[chosen] || null, band };
    }

    function renderPlan(group, upcomingDogYears){
      const container = document.getElementById('nextPlan'); if(!container) return;
      container.innerHTML = '';
      const { plan, band } = planFor(group, upcomingDogYears);
      const heading = document.getElementById('nextPlanHeading');
      if (heading){
        const label = band ? band.label : `turning ${upcomingDogYears} (dog-years)`;
        heading.textContent = `Next Birthday Plan — ${label}`;
      }
      if(!plan){ container.innerHTML = '<div class="muted">Recommendations coming soon for this group.</div>'; return; }
      const order = [
        ['training','Training & Enrichment'],
        ['health','Health & Wellness'],
        ['nutrition','Diet & Nutrition'],
        ['exercise','Exercise Needs'],
        ['bonding','Play & Bonding Ideas'],
        ['gear','Helpful Gear (optional)']
      ];
      for(const [key,label] of order){
        const items = (plan.lanes && plan.lanes[key]) ? plan.lanes[key] : [];
        if(!items.length) continue;
        const lane = document.createElement('div'); lane.className = 'lane';
        lane.innerHTML = `<h4>${label}</h4>`;
        const ul = document.createElement('ul'); items.forEach(t=>{ const li=document.createElement('li'); li.textContent=t; ul.appendChild(li); });
        lane.appendChild(ul); container.appendChild(lane);
      }
    }
    // ---------- end banded plan ----------

    // ICS helpers
    function fmtUTC(d){ const pad=n=>String(n).padStart(2,'0'); return d.getUTCFullYear()+pad(d.getUTCMonth()+1)+pad(d.getUTCDate())+'T'+pad(d.getUTCHours())+pad(d.getUTCMinutes())+pad(d.getUTCSeconds())+'Z'; }
    function icsEvent(summary, start, end){ return `BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Barkday//EN\nBEGIN:VEVENT\nUID:${Date.now()}@barkday\nDTSTAMP:${fmtUTC(new Date())}\nDTSTART:${fmtUTC(start)}\nDTEND:${fmtUTC(end)}\nSUMMARY:${summary}\nEND:VEVENT\nEND:VCALENDAR`; }
    function downloadICS(name, ics){ const blob=new Blob([ics],{type:'text/calendar'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download=name; document.body.appendChild(a); a.click(); a.remove(); }

    // Gift loader (robust filtering)
    async function loadGifts(){
      els.gifts.innerHTML=''; els.giftMeta.textContent='Loading…';
      try{
        const res = await fetch(GIFT_FEED_URL,{cache:'no-store'});
        const items = await res.json();
        const lb = parseInt(els.adultWeight.value,10);
        const bucket = lb<20?'toy':lb<30?'small':lb<50?'medium':lb<90?'large':'giant';
        const dogYears = parseFloat(els.humanYears.textContent);
        const chewer = (els.chewer.value||'').toLowerCase();

        const getSizes = it => Array.isArray(it.sizes)? it.sizes.map(s=>String(s).toLowerCase())
                              : it.size? String(it.size).toLowerCase().split(/[, \t]+/).filter(Boolean)
                              : [];
        const getChewer = it => (it.chewer? String(it.chewer).toLowerCase(): 'any');
        const getAgeBounds = it => {
          const minDY = it.minDogYears ?? it.minHumanYears ?? it.min_age ?? null;
          const maxDY = it.maxDogYears ?? it.maxHumanYears ?? it.max_age ?? null;
          const tag = (it.ageTag||it.tag||'').toString().toLowerCase();
          if((minDY==null && maxDY==null) && tag){
            if(tag.includes('puppy')) return [0, 1.6];
            if(tag.includes('adult')) return [1.0, 7.0];
            if(tag.includes('senior')) return [7.0, 20.0];
          }
          return [minDY, maxDY];
        };

        const results = [];
        for(const it of items){
          let ok = true; let score = 0;
          const sizes = getSizes(it);
          const sizeMatches = !sizes.length || sizes.includes('any') || sizes.includes(bucket);
          if(!els.ignoreSize.checked && !sizeMatches) ok = false; else if(sizeMatches) score += 1;

          const itemChewer = getChewer(it);
          const chewMatches = itemChewer==='any' || itemChewer===chewer;
          if(!els.ignoreChewer.checked && !chewMatches) ok = false; else if(chewMatches) score += 1;

          const [minA,maxA] = getAgeBounds(it);
          let ageMatches = true;
          if(!isNaN(dogYears) && !els.ignoreAge.checked){
            if(minA!=null) ageMatches = ageMatches && dogYears >= Number(minA);
            if(maxA!=null) ageMatches = ageMatches && dogYears <= Number(maxA);
          }
          if(!els.ignoreAge.checked && !ageMatches) ok = false; else if(ageMatches) score += 1;

          if(ok) results.push({it, score, rnd: Math.random()});
        }

        results.sort((a,b)=> (b.score-a.score) || (a.rnd-b.rnd));
        const top = results.slice(0,12).map(r=>r.it);

        const parts = [];
        parts.push(`filters: size=${bucket}`);
        parts.push(`chewer=${chewer||'normal'}`);
        if(!isNaN(dogYears)) parts.push(`age≈${dogYears.toFixed(2)} DY`);
        const ignored = [];
        if(els.ignoreSize.checked) ignored.push('size');
        if(els.ignoreChewer.checked) ignored.push('chewer');
        if(els.ignoreAge.checked) ignored.push('age');
        els.giftMeta.textContent = `Showing ${top.length} picks • ${parts.join(' • ')}${ignored.length? ' • ignored: '+ignored.join(', '):''}`;

        els.gifts.innerHTML = top.map(it=>`<div class="gift"><h4>${it.title||'Gift'}</h4><div class="muted">${(it.tag||it.ageTag||'').toString()}</div><div style="margin-top:8px"><a class="link" href="${it.url}" target="_blank" rel="noopener">View</a></div></div>`).join('');
      }catch(e){
        els.giftMeta.textContent='Could not load gift ideas.';
      }
    }

    // CALCULATE
    const updateWeightLabel = ()=> els.adultWeightVal.textContent = els.adultWeight.value; updateWeightLabel();

    function compute(){
      const dobStr = els.dob.value; if(!dobStr){ alert('Please select a birthdate.'); return; }
      const dob = new Date(dobStr); const now = new Date(); if(isNaN(dob.getTime()) || dob>now){ alert('Birthdate is invalid.'); return; }
      const lb = parseInt(els.adultWeight.value,10);

      // Age now (chronological)
      const days = daysBetween(dob, now); const years = days/365.2425; const yrs=Math.floor(years); const months=Math.floor((years%1)*12);
      els.dogAge.textContent = `${yrs}y ${months}m`;

      // Human-equivalent DOG-YEARS
      const H = humanEqYears(years, lb, els.smooth.checked); els.humanYears.textContent = H.toFixed(2); const R = slopeFromWeight(lb); els.slopeNote.textContent = `R≈${R.toFixed(2)} (weight-continuous)`;

      // Next dog-year birthday (DOG-YEARS integer)
      const name = els.dogName.value || 'your dog';
      const upcoming = Math.floor(H)+1;
      els.nextHeadline.textContent = `${name} is about to be ${upcoming} years old!`;
      const nbd = nextDogYearDate(dob, H, lb, els.smooth.checked); els.nextBday.textContent = nbd.toDateString(); const daysTo = daysBetween(now, nbd); els.nextBdayDelta.textContent = daysTo>0? `${daysTo} days from now` : '';

      // Profile & notes
      const breedTxt=(els.breed.value||'').trim(); const group=els.breedGroup.value; els.profileLine.textContent = `Profile: ${name}${breedTxt ? ' — ' + breedTxt : ''} • Group: ${group} • Weight: ${lb} lb`;
      const notes = GROUPS[group]||[]; els.breedNotes.innerHTML = notes.map(n=>`• ${n}`).join(' ');

      // Mismatch hint
      let warn=''; if(group.includes('Toy') && lb>30) warn='Breed group "Toy" but weight > 30 lb. Math stays weight-based.'; if((group.includes('Guardian')||group.includes('Working')) && lb<20) warn='Breed group suggests large/giant, but weight < 20 lb. Math stays weight-based.'; els.sizeWarn.style.display = warn? 'block':'none'; els.sizeWarn.textContent = warn;

      // Gift meta
      els.giftMeta.textContent = `Gift picks for ${name} — by weight ${lb} lb${breedTxt ? ', ' + breedTxt : ''}`;

      // Celebrate + Plan
      els.nextBday.scrollIntoView({behavior:'smooth', block:'center'}); confetti();
      renderPlan(group, upcoming);

      if(els.gifts.children.length) loadGifts();
    }

    // EVENTS
    els.calcBtn.addEventListener('click', compute);
    els.resetBtn.addEventListener('click', ()=>{
      els.dogName.value=''; els.dob.value=''; els.adultWeight.value=55; updateWeightLabel(); els.chewer.value='Normal';
      els.showEpi.checked=false; els.smooth.checked=true; els.breed.value=''; els.breedGroup.value='Working / Herding';
      els.ignoreAge.checked=els.ignoreSize.checked=els.ignoreChewer.checked=false;
      els.nextHeadline.textContent='—'; els.nextBday.textContent='—'; els.nextBdayDelta.textContent='';
      els.dogAge.textContent='—'; els.humanYears.textContent='—'; els.slopeNote.textContent='';
      els.epi.textContent=''; els.gifts.innerHTML=''; els.giftMeta.textContent='';
      document.getElementById('nextPlan').innerHTML=''; document.getElementById('nextPlanHeading').textContent='Next Birthday Plan';
      els.sizeWarn.style.display='none'; renderHero(); updateBreedNotes();
    });
    els.shareBtn.addEventListener('click', ()=>{
      const p=new URLSearchParams({ n:els.dogName.value||'', d:els.dob.value||'', w:els.adultWeight.value, c:els.chewer.value, g:els.breedGroup.value, r:els.breed.value||'', s:els.smooth.checked?1:0, e:els.showEpi.checked?1:0 });
      const url=location.origin+location.pathname+'?'+p.toString();
      navigator.clipboard.writeText(url).then(()=>alert('Shareable link copied.')).catch(()=>alert(url));
    });

    // ICS buttons
    function fmtUTC(d){ const pad=n=>String(n).padStart(2,'0'); return d.getUTCFullYear()+pad(d.getUTCMonth()+1)+pad(d.getUTCDate())+'T'+pad(d.getUTCHours())+pad(d.getUTCMinutes())+pad(d.getUTCSeconds())+'Z'; }
    els.addCal.addEventListener('click', ()=>{
      if(!els.nextBday.textContent || els.nextBday.textContent==='—'){ alert('Calculate first.'); return; }
      const start=new Date(els.nextBday.textContent); const end=new Date(start.getTime()+60*60*1000);
      const name=els.dogName.value||'Your dog';
      const ics=`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Barkday//EN
BEGIN:VEVENT
UID:${Date.now()}@barkday
DTSTAMP:${fmtUTC(new Date())}
DTSTART:${fmtUTC(start)}
DTEND:${fmtUTC(end)}
SUMMARY:${name} — Next Dog-Year Birthday
END:VEVENT
END:VCALENDAR`;
      const blob=new Blob([ics],{type:'text/calendar'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='barkday.ics'; document.body.appendChild(a); a.click(); a.remove();
    });
    els.remind.addEventListener('click', ()=> alert('Reminder integration placeholder: add 1-week reminder.'));
    els.addYearSeries.addEventListener('click', ()=>{
      if(!els.dob.value){ alert('Calculate first.'); return; }
      const name=els.dogName.value||'Your dog'; const dob=new Date(els.dob.value); const lb=parseInt(els.adultWeight.value,10);
      const now=new Date(); const years=daysBetween(dob, now)/365.2425; const H=humanEqYears(years, lb, els.smooth.checked);
      let cur=nextDogYearDate(dob, H, lb, els.smooth.checked); let dogYears=Math.floor(H)+1; let ics='BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Barkday//EN\n';
      for(let i=0;i<3;i++){
        const start=cur; const end=new Date(start.getTime()+60*60*1000);
        ics+=`BEGIN:VEVENT\nUID:${Date.now()+Math.random()}@barkday\nDTSTAMP:${fmtUTC(new Date())}\nDTSTART:${fmtUTC(start)}\nDTEND:${fmtUTC(end)}\nSUMMARY:${name} — Dog-Year ${dogYears}\nEND:VEVENT\n`;
        dogYears++; cur=nextDogYearDate(dob, dogYears-1, lb, els.smooth.checked);
      }
      ics+='END:VCALENDAR'; const blob=new Blob([ics],{type:'text/calendar'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='barkday_series.ics'; document.body.appendChild(a); a.click(); a.remove();
    });

    // Gift loader
    els.loadGifts.addEventListener('click', loadGifts);

    // QS hydrate (no auto compute)
    (function initFromQS(){
      const q=new URLSearchParams(location.search);
      if(q.size){
        els.dogName.value=q.get('n')||''; els.dob.value=q.get('d')||''; els.adultWeight.value=q.get('w')||55; els.adultWeightVal.textContent=els.adultWeight.value;
        els.chewer.value=q.get('c')||'Normal'; els.breedGroup.value=q.get('g')||'Working / Herding'; els.breed.value=q.get('r')||'';
        els.smooth.checked=q.get('s')==='1'; els.showEpi.checked=q.get('e')==='1';
        renderHero(); updateBreedNotes();
      }
    })();
  </script>
</body>
</html>
